# 健康魔方 - 完整使用说明

## 🎯 系统概述

健康魔方是一个集成了多个AI功能的智能健康管理平台，所有功能都在 `health-cube.html` 中。

## 📋 功能列表

### 1. AI饮食记录与建议
- **位置**: 左侧导航 → "AI饮食记录与建议"
- **功能**: 输入食物描述，AI分析热量和营养
- **使用**: 输入文字描述 → 点击"AI 分析" → 查看结果

### 2. AI饮食计划
- **位置**: 左侧导航 → "AI饮食计划"
- **功能**: 生成个性化的一日三餐计划
- **使用**: 填写个人信息 → 设置目标 → 点击"生成饮食计划"

### 3. AI运动计划
- **位置**: 左侧导航 → "AI运动计划"
- **功能**: 生成个性化的运动训练计划
- **使用**: 填写身体信息 → 设置训练目标 → 点击"生成运动计划"

### 4. 身体数据管理
- **位置**: 左侧导航 → "身体数据管理"
- **功能**: 记录和追踪体重、BMI等数据
- **使用**: 输入体重身高 → 点击"保存数据" → 查看历史记录

## 🚀 快速开始

### 步骤1: 启动后端服务

```bash
# Windows 用户
启动服务.bat

# 或使用命令行
python app.py
```

**重要**: 
- 保持命令行窗口打开
- 看到 "Application startup complete" 表示成功
- 不要关闭窗口，否则功能无法使用

### 步骤2: 访问系统

打开浏览器访问: `http://localhost:8000`

### 步骤3: 登录系统

- 如果是新用户，点击"注册"创建账号
- 如果已有账号，直接登录

### 步骤4: 使用功能

点击左侧导航栏选择要使用的功能。

## 📖 详细使用指南

### 功能1: AI饮食记录与建议

#### 使用步骤
1. 点击左侧导航 "AI饮食记录与建议"
2. 在文字描述框中输入食物信息
3. 点击 "AI 分析" 按钮
4. 等待10-20秒，查看分析结果
5. 点击 "保存到饮食记录" 保存

#### 输入示例
- "一份鸡胸肉沙拉，大概 200g"
- "一碗牛肉面，加了一个鸡蛋"
- "麦当劳巨无霸汉堡套餐"
- "一个苹果"
- "星巴克大杯拿铁咖啡"

#### 结果说明
- **食物名称**: AI识别的食物
- **热量估算**: 估算的总热量（kcal）
- **健康评分**: 1-5星评级
- **营养建议**: 专业的饮食建议
- **数据来源**: 标识数据来自热量表或AI估算

### 功能2: AI饮食计划

#### 使用步骤
1. 点击左侧导航 "AI饮食计划"
2. 填写个人信息：
   - 性别
   - 年龄
   - 身高（cm）
   - 体重（kg）
3. 设置饮食目标：
   - 目标：减脂/增肌/维持
   - 每日热量预算（kcal）
4. 点击 "生成饮食计划"
5. 等待20-30秒，查看生成的计划

#### 结果说明
- **每日热量目标**: 根据您的情况计算的热量
- **餐次**: 早餐、午餐、晚餐、加餐
- **每餐详情**: 
  - 食物名称
  - 食物描述
  - 热量
  - 标签（如：高蛋白、低脂）
  - 营养建议

### 功能3: AI运动计划

#### 使用步骤
1. 点击左侧导航 "AI运动计划"
2. 填写个人信息：
   - 性别
   - 年龄
   - 身高（cm）
   - 体重（kg）
3. 设置训练目标：
   - 目标：减脂/增肌/健康
   - 可用时间（分钟）
4. 点击 "生成运动计划"
5. 等待20-30秒，查看生成的计划

#### 结果说明
- **总训练时长**: 整个训练的时间
- **训练环节**: 多个训练小节
- **每个环节包含**:
  - 环节名称（如：热身、主训练）
  - 时长
  - 类型（cardio/strength/hiit等）
  - 强度（low/medium/high）
  - 目标心率
  - 具体动作列表
  - 训练技巧和提示

### 功能4: 身体数据管理

#### 使用步骤
1. 点击左侧导航 "身体数据管理"
2. 填写数据：
   - 体重（kg）
   - 身高（cm）
   - 性别
   - 年龄
3. 点击 "保存数据"
4. 查看自动计算的 BMI
5. 在下方查看历史记录

#### 功能说明
- **自动计算**: 系统自动计算 BMI
- **历史记录**: 显示所有保存的记录
- **删除功能**: 可以删除不需要的记录
- **数据追踪**: 可以看到体重变化趋势

## ⚠️ 注意事项

### 1. 后端服务必须运行
- 所有AI功能都需要后端服务
- 启动后不要关闭命令行窗口
- 如果关闭了，需要重新启动

### 2. 网络连接
- AI功能需要调用大模型API
- 需要稳定的网络连接
- 响应时间通常10-30秒

### 3. API密钥
- 确保 `.env` 文件中的API密钥有效
- 如果密钥过期，需要更新

### 4. 数据准确性
- AI估算结果仅供参考
- 实际热量可能有偏差
- 建议结合专业营养师建议

## 🔧 故障排除

### 问题1: 点击按钮后出现 "Failed to fetch"

**原因**: 后端服务未启动或连接失败

**解决方案**:
1. 检查后端服务是否运行
2. 运行 `python test_backend.py` 测试
3. 查看 [故障排除指南.md](故障排除指南.md)

### 问题2: 生成计划很慢

**原因**: 大模型需要时间分析

**解决方案**:
- 这是正常现象
- 通常需要10-30秒
- 请耐心等待
- 不要重复点击按钮

### 问题3: 生成失败

**原因**: 
- API密钥无效
- 网络连接问题
- 大模型服务异常

**解决方案**:
1. 检查 `.env` 文件中的API密钥
2. 检查网络连接
3. 查看后端命令行的错误信息
4. 稍后重试

### 问题4: 历史记录不显示

**原因**: 
- 还没有保存过数据
- 数据文件损坏

**解决方案**:
1. 先保存一条数据
2. 刷新页面
3. 检查是否有 `user_body_data.json` 文件

## 📊 使用技巧

### 技巧1: 详细描述食物
- 包含食物名称
- 说明大概重量或分量
- 提到烹饪方式
- 例如："煎鸡胸肉150g，配西兰花100g"

### 技巧2: 合理设置热量目标
- 减脂：比基础代谢低300-500 kcal
- 增肌：比基础代谢高300-500 kcal
- 维持：等于基础代谢

### 技巧3: 根据实际情况调整
- 生成的计划是建议
- 可以根据实际情况调整
- 重新生成会得到不同的计划

### 技巧4: 定期记录数据
- 建议每周记录1-2次
- 固定时间测量（如早晨空腹）
- 追踪变化趋势

## 📞 获取帮助

### 文档资源
- **快速启动**: [快速启动指南.md](快速启动指南.md)
- **故障排除**: [故障排除指南.md](故障排除指南.md)
- **完整文档**: [完整集成文档.md](完整集成文档.md)
- **API文档**: `http://localhost:8000/docs`

### 测试工具
- **后端测试**: `python test_backend.py`
- **完整测试**: `python test_all_modules.py`

### 常见问题
1. 查看故障排除指南
2. 运行测试脚本
3. 检查后端日志
4. 查看浏览器控制台

---

**祝您使用愉快！** 🥗💪🏃‍♂️
